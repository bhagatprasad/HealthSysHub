<!-- partial:partials/_sidebar.html -->
<nav class="sidebar sidebar-offcanvas" id="sidebar">
  <ul class="nav">
    <li class="nav-item nav-profile border-bottom">
      <a href="#" class="nav-link flex-column">
        <div class="nav-profile-image">
          <img [src]="userImage" alt="profile">
          <!--change to offline or busy as needed-->
        </div>
        <div class="nav-profile-text d-flex ms-0 mb-3 flex-column">
          <span class="fw-semibold mb-1 mt-2 text-center">{{userName}}</span>
          <span class="text-secondary icon-sm text-center">{{userRole}}</span>
        </div>
      </a>
    </li>
    
    <li class="nav-item pt-3">
      <a class="nav-link d-block" routerLink="/dashboard">
        <img class="sidebar-brand-logo" src="assets/images/logo.svg" alt="Logo">
        <img class="sidebar-brand-logomini" src="assets/images/logo-mini.svg" alt="Mini Logo">
        <div class="small fw-light pt-1">Pharmacy Dashboard</div>
      </a>
      <form class="d-flex align-items-center" (submit)="search($event)">
        <div class="input-group">
          <div class="input-group-prepend">
            <i class="input-group-text border-0 mdi mdi-magnify"></i>
          </div>
          <input type="text" class="form-control border-0" placeholder="Search" [(ngModel)]="searchQuery" name="search">
        </div>
      </form>
    </li>

    <!-- Common Menu Items -->
    <li class="nav-item">
      <a class="nav-link" routerLink="/dashboard" routerLinkActive="active">
        <i class="mdi mdi-compass-outline menu-icon"></i>
        <span class="menu-title">Dashboard</span>
      </a>
    </li>

    <!-- Dynamic Menu Items -->
    <ng-container *ngFor="let item of menuItems">
      <li class="nav-item">
        <a class="nav-link" [routerLink]="item.link" routerLinkActive="active">
          <i class="mdi {{item.icon}} menu-icon"></i>
          <span class="menu-title">{{item.title}}</span>
        </a>
      </li>
    </ng-container>

    <!-- Admin Only Items -->
    <ng-container *ngIf="isAdmin">
      <li class="nav-item">
        <a class="nav-link" routerLink="/admin/users" routerLinkActive="active">
          <i class="mdi mdi-account-group menu-icon"></i>
          <span class="menu-title">User Management</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" routerLink="/admin/medicines" routerLinkActive="active">
          <i class="mdi mdi-pill menu-icon"></i>
          <span class="menu-title">Medicine Inventory</span>
        </a>
      </li>
    </ng-container>

    <!-- Settings Dropdown -->
    <li class="nav-item">
      <a class="nav-link" data-bs-toggle="collapse" href="#settings" aria-expanded="false">
        <i class="mdi mdi-cog menu-icon"></i>
        <span class="menu-title">Settings</span>
        <i class="menu-arrow"></i>
      </a>
      <div class="collapse" id="settings">
        <ul class="nav flex-column sub-menu">
          <li class="nav-item">
            <a class="nav-link" routerLink="/settings/profile">Profile</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/settings/change-password">Change Password</a>
          </li>
        </ul>
      </div>
    </li>
  </ul>
</nav>